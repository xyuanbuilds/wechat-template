<!--pages/user/user.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-info">
    <view class="user-avatar">
      <image 
        wx:if="{{userInfo}}" 
        src="{{userInfo.avatarUrl}}" 
        class="avatar-image"
        mode="aspectFill"
      />
      <view wx:else class="avatar-placeholder">
        <text class="avatar-text">ğŸ‘¤</text>
      </view>
    </view>
    
    <view class="user-details">
      <view wx:if="{{userInfo}}" class="user-name">
        {{userInfo.nickName}}
      </view>
      <view wx:else class="login-prompt">
        <button 
          class="login-btn" 
          bindtap="getUserProfile"
          type="primary"
          size="mini"
        >
          ç‚¹å‡»ç™»å½•
        </button>
      </view>
      
      <view wx:if="{{extConfig && extConfig.config && extConfig.config.business}}" class="business-info">
        <text class="business-name">{{extConfig.config.business.name}}</text>
      </view>
    </view>
    
    <view wx:if="{{userInfo}}" class="logout-btn">
      <button 
        class="logout-button" 
        bindtap="logout"
        size="mini"
        type="warn"
      >
        é€€å‡º
      </button>
    </view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view wx:if="{{userInfo}}" class="stats-section">
    <view class="stats-item" data-type="orders" bindtap="onStatsTap">
      <view class="stats-number">{{userStats.orders}}</view>
      <view class="stats-label">è®¢å•</view>
    </view>
    <view class="stats-item" data-type="favorites" bindtap="onStatsTap">
      <view class="stats-number">{{userStats.favorites}}</view>
      <view class="stats-label">æ”¶è—</view>
    </view>
    <view class="stats-item" data-type="points" bindtap="onStatsTap">
      <view class="stats-number">{{userStats.points}}</view>
      <view class="stats-label">ç§¯åˆ†</view>
    </view>
    <view class="stats-item" data-type="coupons" bindtap="onStatsTap">
      <view class="stats-number">{{userStats.coupons}}</view>
      <view class="stats-label">ä¼˜æƒ åˆ¸</view>
    </view>
  </view>

  <!-- å¿«æ·è®¢å• -->
  <view wx:if="{{userInfo}}" class="order-section">
    <view class="section-title">
      <text>æˆ‘çš„è®¢å•</text>
      <text class="more-btn">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>
    <view class="order-status">
      <view class="order-item" data-status="å¾…ä»˜æ¬¾" bindtap="onOrderStatusTap">
        <view class="order-icon">ğŸ’°</view>
        <view class="order-text">å¾…ä»˜æ¬¾</view>
      </view>
      <view class="order-item" data-status="å¾…å‘è´§" bindtap="onOrderStatusTap">
        <view class="order-icon">ğŸ“¦</view>
        <view class="order-text">å¾…å‘è´§</view>
      </view>
      <view class="order-item" data-status="å¾…æ”¶è´§" bindtap="onOrderStatusTap">
        <view class="order-icon">ğŸšš</view>
        <view class="order-text">å¾…æ”¶è´§</view>
      </view>
      <view class="order-item" data-status="å¾…è¯„ä»·" bindtap="onOrderStatusTap">
        <view class="order-icon">â­</view>
        <view class="order-text">å¾…è¯„ä»·</view>
      </view>
      <view class="order-item" data-status="é€€æ¢è´§" bindtap="onOrderStatusTap">
        <view class="order-icon">ğŸ”„</view>
        <view class="order-text">é€€æ¢è´§</view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="section-title">
      <text>åŠŸèƒ½èœå•</text>
    </view>
    <view class="menu-list">
      <view 
        wx:for="{{menuList}}" 
        wx:key="id"
        class="menu-item"
        data-item="{{item}}"
        bindtap="onMenuTap"
      >
        <view class="menu-icon">{{item.icon}}</view>
        <view class="menu-content">
          <text class="menu-title">{{item.title}}</text>
        </view>
        <view wx:if="{{item.arrow}}" class="menu-arrow">></view>
      </view>
    </view>
  </view>

  <!-- å•†å®¶ä¿¡æ¯ -->
  <view wx:if="{{extConfig && extConfig.config && extConfig.config.business}}" class="business-section">
    <view class="section-title">
      <text>å•†å®¶ä¿¡æ¯</text>
    </view>
    <view class="business-card">
      <view class="business-logo">
        <image 
          wx:if="{{extConfig.config.business.logo}}"
          src="{{extConfig.config.business.logo}}" 
          class="logo-image"
          mode="aspectFill"
        />
        <view wx:else class="logo-placeholder">ğŸª</view>
      </view>
      <view class="business-details">
        <view class="business-name">{{extConfig.config.business.name}}</view>
        <view wx:if="{{extConfig.config.business.description}}" class="business-desc">
          {{extConfig.config.business.description}}
        </view>
        <view wx:if="{{extConfig.config.business.contact}}" class="business-contact">
          <view wx:if="{{extConfig.config.business.contact.phone}}" class="contact-item">
            <text class="contact-label">ç”µè¯ï¼š</text>
            <text class="contact-value">{{extConfig.config.business.contact.phone}}</text>
          </view>
          <view wx:if="{{extConfig.config.business.contact.address}}" class="contact-item">
            <text class="contact-label">åœ°å€ï¼š</text>
            <text class="contact-value">{{extConfig.config.business.contact.address}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-section">
    <text class="version-text">
      ç‰ˆæœ¬ {{extConfig && extConfig.version ? extConfig.version : '1.0.0'}}
    </text>
  </view>
</view> 